env:
  global:
  - PLAT=x86_64
  - BUILD_COMMIT=e9f76e125b836d0fdc0a533e2fee3fca8bf4c1a1
language: python
python: 3.5
sudo: required
dist: trusty
services:
- docker
matrix:
  exclude:
  - python: 3.5
  include:
  - os: osx
    language: objective-c
    env:
    - MB_PYTHON_VERSION=2.7
    - NP_BUILD_DEP=1.10.1
    - NP_TEST_DEP=1.10.1
    - PANDAS_DEP="0.20.2"
  - os: osx
    language: objective-c
    env:
    - MB_PYTHON_VERSION=3.5
    - NP_BUILD_DEP="1.10.1"
    - NP_TEST_DEP="1.10.1"
    - PANDAS_DEP="0.20.2"
  - os: osx
    language: objective-c
    env:
    - MB_PYTHON_VERSION=3.6
    - NP_BUILD_DEP="1.11.3"
    - NP_TEST_DEP="1.11.3"
    - PANDAS_DEP="0.20.2"
  - language: cpp
    os: linux
    before_script:
    - docker pull quay.io/xhochy/arrow_manylinux1_x86_64_base:latest
    before_install:
    install:
    script:
    - pushd arrow/python/manylinux1
    - git clone ../../ arrow
    - docker build -t arrow-base-x86_64 -f Dockerfile-x86_64 .
    - docker run --shm-size=2g --rm -e PYARROW_PARALLEL=3 -v $PWD:/io arrow-base-x86_64
      /io/build_arrow.sh
before_install:
- brew uninstall boost
- brew update
- brew upgrade cmake
- BUILD_DEPENDS="numpy==$NP_BUILD_DEP six cython"
- TEST_DEPENDS="numpy==$NP_TEST_DEP six pandas==$PANDAS_DEP"
- pushd python-macos
- source multibuild/common_utils.sh
- source multibuild/travis_steps.sh
- before_install
- popd
install:
- clean_code arrow $BUILD_COMMIT
- build_wheel arrow $PLAT
script:
- echo "SCRIPT"
- pwd
after_success:
- echo "After success"
- pwd
deploy:
  provider: bintray
  file: descriptor.json
  user: wesm
  key:
    secure: nuErTGtf9e3itkAe4gODHMG7jxjW8PiDargOP4df5DntE9c3TtfV7lzIRc0YmARDLPbe4tKbBd9+Sv6deimAd6ZFWYhQALVKWEANVK+ROeH6rusq60rdxiDpdtWqTF+yXqcYk76J1ifdtPtFW1wHkXfEcnmQhP93PijIiT0+oiXN4BjdReSr0FKqDqc3ZlNu6dwx6Bb0P/IJkvAKb0V6cQwfWn2vRuQj2YcOwGPHDUDyH2/b5lCR+3egLu5DiwEvGlXsUtOIMmWoBmkoTAUkE2SO9ZToZHW9+xCIzOlQYqm35t+aknItmcmbGMfdGoo4ImDdLzo4wjFSt+sjRIKvC90ondtom6ZKc3Z+KJFzuAfmnZMT23RjgcohaDoh8g269tew/5dZdQRO5GJrtV/85Ou6a3ka+rOU1bdxQ0OcOJRWsDKm+gqWRwpikUU29+a4sREKhLp8wdOocmTSlL2lcysDppogVAqvVNt2k8HJBWWbdocYDd1EgMl3cPY+HDNPfz+60nLU0X2CegSmIbL5qLqjfVcdrPDQRFa+GZCzQl7K5uGA/EbINn1L6CUn+V0PMB6Zbe649IJrtn/haGgdGBoGibajZAEuiUVkLXpFfV6XBG1dfOwY+F4QtqxbcTKoMBI1l/qEMO6WLf+W/pBmE4HqPa0epmWFj2pqdzbwBzE=
